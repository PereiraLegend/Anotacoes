function carregarProfissionais() {
    fetch('http://localhost:8080/user/all')
    .then(response => {
        if (!response.ok) {
            throw new Error('Erro ao carregar os dados da API');
        }
        return response.json();
    })
    .then(data => {
        const tableBody = document.querySelector('#tabelaprofissionais tbody');
        // Limpa o conteúdo da tabela antes de adicionar os novos dados
        tableBody.innerHTML = '';
        // Loop pelos dados recebidos e adiciona-os à tabela
        data.forEach(profissional => {
            const row = document.createElement('tr');
            row.innerHTML = `
                <td>${profissional.id}</td>
                <td>${profissional.username}</td>
                <td>${profissional.tipocadastro}</td>
                <td>${profissional.cpf}</td>
                <td>${profissional.email}</td>
                <td>${profissional.datanascimento}</td>
                <td>${profissional.telefone}</td>
                <td>${profissional.titulo}</td>
                <td>${profissional.status}</td>
                <td>${profissional.codigounico}</td>
                <td>
                    <button onclick="detalhesUsuario(${JSON.stringify(profissional)})">Detalhes</button>
                </td>
            `;
            tableBody.appendChild(row);
        });
        console.log("Deu certo!");
    })
    .catch(error => console.error('Erro ao carregar os dados:', error));
}

function detalhesUsuario(profissional) {
    // Abre o diálogo do PrimeFaces
    PF('detalheProfissional').show();
}

window.onload = carregarProfissionais;
