function carregarProfissionais() {
    fetch('http://localhost:8080/user/all')
    .then(response => {
        if (!response.ok) {
            throw new Error('Erro ao carregar os dados da API');
        }
        return response.json();
    })
    .then(data => {
        const tableBody = document.querySelector('#tabelaprofissionais tbody');
        // Limpa o conteúdo da tabela antes de adicionar os novos dados
        tableBody.innerHTML = '';
        // Loop pelos dados recebidos e adiciona-os à tabela
        data.forEach(profissional => {
            const row = document.createElement('tr');
            row.innerHTML = `
                <td>${profissional.id}</td>
                <td>${profissional.username}</td>
                <td>${profissional.tipocadastro}</td>
                <td>${profissional.cpf}</td>
                <td>${profissional.email}</td>
                <td>${profissional.datanascimento}</td>
                <td>${profissional.telefone}</td>
                <td>${profissional.titulo}</td>
                <td>${profissional.status}</td>
                <td>${profissional.codigounico}</td>
                <td>
                	<p:commandButton oncomplete="PF('detalheProfissional').show()">botão</p:commandButton>
                </td>
            `;
                    //<button onclick="detalhesUsuario(${JSON.stringify(profissional)})">Detalhes</button>
            tableBody.appendChild(row);
        });
        console.log("Deu certo!");
    })
    .catch(error => console.error('Erro ao carregar os dados:', error));
}

function editarUsuario(id) {
    // Lógica para editar o usuário com o ID fornecido
}

function excluirUsuario(id) {
    // Lógica para excluir o usuário com o ID fornecido
}

function detalhesUsuario(profissional) {
    // Seleciona os elementos do modal e atualiza seu conteúdo com os dados do profissional
    const modalContent = document.querySelector('.modal-content');
    modalContent.innerHTML = `
    	<p:dialog modal="true" height="400" width="400" widgetVar="detalheProfissional">
        	<h:form>
        		<h:panelGrid>
        			<p>ID: ${profissional.id}</p>
        			<p>Usuário: ${profissional.username}</p>
        			<p>Tipo de Cadastro: ${profissional.tipocadastro}</p>
        			<p>CPF: ${profissional.cpf}</p>
        			<p>Email: ${profissional.email}</p>
        			<p>Data de Nascimento: ${profissional.datanascimento}</p>
        			<p>Telefone: ${profissional.telefone}</p>
        			<p>Título: ${profissional.titulo}</p>
        			<p>Status: ${profissional.status}</p>
        			<p>Código Único: ${profissional.codigounico}</p>		
        		</h:panelGrid>
        	</h:form>
        </p:dialog>
    `;
    
    // Abre o modal
    abrirModal();
}

/*
function fecharModal() {
    var modal = document.getElementById('myModal');
    modal.style.display = 'none';
}

function abrirModal() {
    var modal = document.getElementById('myModal');
    modal.style.display = 'block';
}
*/

// Chama a função ao carregar a página para preencher a tabela
window.onload = carregarProfissionais;
